<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transit — demo</title>
    <style>
      :root{--accent:#d4001f;--dark:#0b1220;--muted:#6b7280;--card:#ffffff}
      html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial}
      body{background:linear-gradient(180deg,#f6f7fb 0%, #fff 100%);color:var(--dark)}
      .topbar{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;background:linear-gradient(90deg,rgba(255,255,255,0.7),rgba(255,255,255,0.6));backdrop-filter:blur(6px);position:sticky;top:0;z-index:40;border-bottom:1px solid rgba(11,18,32,0.04)}
      .brand{display:flex;align-items:center;gap:12px}
      .logo{width:44px;height:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
      nav a{margin-left:18px;color:var(--muted);text-decoration:none;font-weight:600}
      .hero{display:grid;grid-template-columns:1fr 480px;gap:32px;align-items:center;padding:56px 6vw}
      .hero-left h1{font-size:36px;margin:0 0 12px}
      .hero-left p{margin:0 0 20px;color:var(--muted);max-width:52ch}
      .search-card{background:linear-gradient(180deg,#fff,#fbfbfd);box-shadow:0 6px 18px rgba(11,18,32,0.06);padding:18px;border-radius:12px;border:1px solid rgba(11,18,32,0.04)}
      .fields{display:grid;grid-template-columns:1fr 1fr;gap:8px}
      .field{display:flex;flex-direction:column}
      label{font-size:12px;color:var(--muted);margin-bottom:6px}
      input,select{padding:10px 12px;border:1px solid #e6e9ef;border-radius:8px;font-size:14px}
      .actions{display:flex;gap:10px;margin-top:12px}
      .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
      .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(212,0,31,0.12)}
      .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;padding:32px 6vw}
      .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 16px rgba(11,18,32,0.04);border:1px solid rgba(11,18,32,0.04)}
      .card h3{margin:0 0 8px}
      .footer{padding:28px 6vw;border-top:1px solid rgba(11,18,32,0.04);color:var(--muted);display:flex;justify-content:space-between;align-items:center}
      @media(max-width:900px){.hero{grid-template-columns:1fr;gap:18px;padding:28px} .cards{grid-template-columns:1fr} nav a{display:none}}
    </style>
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <div class="logo">T</div>
        
      </div>
      <nav style="display: flex !important; flex-direction: column; background-color: #f0f0f0; z-index: 9999; position: relative;">
    <a href="index3.html" style="padding: 20px; display: block; color: blue;">Formulario</a>
    <a href="help.html" style="padding: 10px; display: block;">Help</a>
    <a href="index2.html" style="padding: 10px; display: block;">Gráficas de quejas</a>
      </nav>
    </header>

    <main>
      <section class="hero">
        <div class="hero-left">
          <h1>Fast, simple travel planning</h1>
          <p>Search connections, compare options and book your trip. This demo shows a clean, responsive search experience inspired by modern rail operator sites.</p>
          <div style="display:flex;gap:12px;margin-top:20px">
            <button class="btn">Book a Trip</button>
            <button class="btn ghost">See Timetables</button>
          </div>
        </div>

        <aside>
          <div class="search-card">
            <form id="searchForm">
              <div class="fields">
                <div class="field">
                  <label>From</label>
                  <input type="text" id="from" placeholder="City or station" value="Vienna">
                </div>
                <div class="field">
                  <label>To</label>
                  <input type="text" id="to" placeholder="City or station" value="Salzburg">
                </div>
              </div>
              <div class="fields" style="margin-top:10px">
                <div class="field">
                  <label>Date</label>
                  <input type="date" id="date">
                </div>
                <div class="field">
                  <label>Passengers</label>
                  <select id="pax"><option>1 adult</option><option>2 adults</option><option>1 adult, 1 child</option></select>
                </div>
              </div>
              <div class="actions">
                <button class="btn" type="submit">Search connections</button>
                <button class="btn ghost" type="button" id="swapBtn">Swap</button>
              </div>
            </form>
          </div>
        </aside>
      </section>

      <section class="cards">
        <div class="card">
          <h3>Quick connections</h3>
          <p style="color:var(--muted)">Find fast direct routes between major cities with seat availability and journey time.</p>
        </div>
        <div class="card">
          <h3>Flexible tickets</h3>
          <p style="color:var(--muted)">Compare refund and change options so you can travel with confidence.</p>
        </div>
        <div class="card">
          <h3>Travel alerts</h3>
          <p style="color:var(--muted)">Real-time updates for disruptions and platform changes for your route.</p>
        </div>
      </section>
      
      <section id="top30" style="padding:24px 6vw">
        <h2 style="margin:0 0 12px">Top 30 palabras del contenido de las quejas</h2>
        <p style="margin:0 0 16px;color:var(--muted)">Most frequent words extracted from the dataset. Hover rows for details, click headers to sort.</p>
        <div class="card" style="padding:12px">
          <div id="tableContainer">Loading...</div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>© Transit Demo — Not affiliated with any operator</div>
      <div style="font-size:13px;color:var(--muted)">Built for the hackathon — local demo only</div>
    </footer>

    <script>
      // Small interactive behaviour for the demo search form
      document.getElementById('searchForm').addEventListener('submit', function(e){
        e.preventDefault();
        const from = document.getElementById('from').value || '—';
        const to = document.getElementById('to').value || '—';
        const date = document.getElementById('date').value || 'any date';
        alert(`Searching connections from ${from} to ${to} on ${date}...\n(This is a demo UI.)`);
      });
      document.getElementById('swapBtn').addEventListener('click', function(){
        const a = document.getElementById('from');
        const b = document.getElementById('to');
        const t = a.value; a.value = b.value; b.value = t;
      });
      
      // Top30 table: fetch JSON and render a striking table with bars
      (function renderTop30(){
        const container = document.getElementById('tableContainer');
        const src = './tablas/top30.json';
        function human(n){ return n.toLocaleString(); }
        function buildTable(data){
          if(!data || !data.length){ container.innerHTML = '<div style="color:var(--muted)">No data</div>'; return; }
          // compute max for bars
          const max = Math.max(...data.map(d=>d.count));
          const table = document.createElement('table');
          table.style.width = '100%';
          table.style.borderCollapse = 'collapse';
          table.innerHTML = `
            <thead>
              <tr style="text-align:left;color:var(--muted)">
                <th style="width:64px;cursor:pointer">#</th>
                <th style="cursor:pointer">Word</th>
                <th style="width:160px;cursor:pointer">Count</th>
              </tr>
            </thead>
            <tbody></tbody>
          `;
          const tbody = table.querySelector('tbody');
          data.forEach((row,i)=>{
            const tr = document.createElement('tr');
            tr.style.transition = 'background 120ms';
            tr.onmouseenter = ()=> tr.style.background = 'linear-gradient(90deg, rgba(212,0,31,0.04), rgba(11,18,32,0.02))';
            tr.onmouseleave = ()=> tr.style.background = 'transparent';
            const rank = document.createElement('td');
            rank.innerHTML = `<div style="font-weight:800;color:${i<3? 'var(--accent)':'var(--dark)'}">${i+1}</div>`;
            const word = document.createElement('td');
            word.innerHTML = `<div style="font-weight:700;font-size:15px">${escapeHtml(row.word)}</div>`;
            const countTd = document.createElement('td');
            const pct = Math.round((row.count/max)*100);
            countTd.innerHTML = `
              <div style="display:flex;align-items:center;gap:8px">
                <div style="flex:1;background:#f1f5f9;border-radius:999px;overflow:hidden;height:14px">
                  <div style="width:${pct}%;height:100%;background:linear-gradient(90deg,var(--accent),#ff6b6b)"></div>
                </div>
                <div style="min-width:56px;text-align:right;font-weight:700">${human(row.count)}</div>
              </div>
            `;
            tr.appendChild(rank); tr.appendChild(word); tr.appendChild(countTd);
            tbody.appendChild(tr);
          });

          // sorting handlers
          table.querySelectorAll('th').forEach((th, idx)=>{
            th.addEventListener('click', ()=>{
              const asc = th.dataset.asc !== '1';
              table.querySelectorAll('th').forEach(h=>h.dataset.asc='0');
              th.dataset.asc = asc ? '1' : '0';
              let sorted = [...data];
              if(idx===0){ sorted.sort((a,b)=> asc ? data.indexOf(a)-data.indexOf(b) : data.indexOf(b)-data.indexOf(a)); }
              if(idx===1){ sorted.sort((a,b)=> asc ? a.word.localeCompare(b.word) : b.word.localeCompare(a.word)); }
              if(idx===2){ sorted.sort((a,b)=> asc ? a.count-b.count : b.count-a.count); }
              // rebuild tbody
              tbody.innerHTML = '';
              sorted.forEach((row,i)=>{
                const tr = document.createElement('tr');
                tr.onmouseenter = ()=> tr.style.background = 'linear-gradient(90deg, rgba(212,0,31,0.04), rgba(11,18,32,0.02))';
                tr.onmouseleave = ()=> tr.style.background = 'transparent';
                const rank = document.createElement('td');
                rank.innerHTML = `<div style="font-weight:800;color:${i<3? 'var(--accent)':'var(--dark)'}">${i+1}</div>`;
                const word = document.createElement('td');
                word.innerHTML = `<div style="font-weight:700;font-size:15px">${escapeHtml(row.word)}</div>`;
                const countTd = document.createElement('td');
                const pct = Math.round((row.count/max)*100);
                countTd.innerHTML = `
                  <div style="display:flex;align-items:center;gap:8px">
                    <div style="flex:1;background:#f1f5f9;border-radius:999px;overflow:hidden;height:14px">
                      <div style="width:${pct}%;height:100%;background:linear-gradient(90deg,var(--accent),#ff6b6b)"></div>
                    </div>
                    <div style="min-width:56px;text-align:right;font-weight:700">${human(row.count)}</div>
                  </div>
                `;
                tr.appendChild(rank); tr.appendChild(word); tr.appendChild(countTd);
                tbody.appendChild(tr);
              });
            });
          });

          container.innerHTML = '';
          container.appendChild(table);
        }

        function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

        fetch(src).then(r=>r.json()).then(data=>{
          // ensure entries sorted by count desc
          data.sort((a,b)=>b.count - a.count);
          buildTable(data);
        }).catch(err=>{
          container.innerHTML = `<div style="color:#a00">Failed to load data: ${escapeHtml(err.message || err)}</div>`;
          console.error(err);
        });
      })();
    </script>
  </body>
</html>
